{
	"templateId":"user-message",
	"templateRole":"user-message",
	"model":"message",
	"label":"Message Viewer",
	"description":"Message displays a single message and related parents/responses/replies",
	"icon":"inbox",
	"extends":["base-social"],
	"containedBy": [],
	"schema": {
		"title":"Message",
		"type":"object",
		"properties": {}
	},

	"bundles": {
		"stylesheet": {
			"contentType":"text/css"
		},
		"hyperscript":{
			"contentType":"text/hyperscript"
		}
	},
	"actions": {

		"view-single": {
			"roles":["self"],
			"steps":[
				{"step":"view-html"}
			]
		},
		"view": {
			"roles":["self"],
			"steps":[
				{"step":"set-args", "path":"/@me/messages/{{.MessageID}}"},
				{"step":"as-modal", "options":["class:large"], "steps":[
					{"step":"view-html", "file":"view"}
				]}
			]
		},
		"delete": {
			"roles": ["self"],
			"steps": [
				{"step":"delete", "title":"Delete Message?", "message":"Are you sure you want to delete this message?"},
				{"step":"reload-page"}
			]
		},

		"reply":{
			"roles":["self"],
			"steps":[
				{"step":"set-args", "postTo":"/@me/messages/{{.MessageID}}/reply"},
				{"step":"add-stream", "location":"outbox", "roles":"outbox-reply", "as-embed":true, "with-data":{
					"inReplyTo":"{{.Permalink}}"
				}},
				{"step": "set-header", "name":"hx-retarget", "value":"#replies"},
				{"step": "set-header", "name":"hx-reswap", "value":"innerHTML"},
				{"step":"view-html", "method":"post", "file":"replies"}
			]
		},
		"replies":{
			"roles":["self"],
			"steps":[
				{"step":"view-html"}
			]
		}
	}
}	
