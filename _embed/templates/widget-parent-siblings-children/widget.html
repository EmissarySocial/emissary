{{- $siblings := .Siblings.Slice -}}
{{- $children := .Children.Slice -}}
{{- $parentID := .ParentID -}}
{{- $streamID := .StreamID -}}
{{- $addChild := .UserCan "add-child" -}}
<div class="widget widget-ancestors-siblings">

	{{- if .HasParent }}
		{{- $parent := .Parent "view" -}}
		<div class="ellipsis"><a href="/{{$parent.StreamID}}" class="turboclick">{{$parent.Label}}</a></div>
	{{- end -}}

	{{- range $index, $sibling := $siblings -}}
		{{- if eq $streamID $sibling.StreamID -}}
			<div class="ellipsis bold">{{.Label}}</div>

			{{- range $index, $child := $children -}}
				<div class="ellipsis"><a href="/{{$child.StreamID}}" class="turboclick">- {{$child.Label}}</a></div>
			{{- end -}}

			{{- if $addChild -}}
				<div class="ellipsis space-above"><a hx-get="/{{.StreamID}}/add-child">+ Add a Stream</a></div>
			{{- end -}}
		{{- else -}}
			<div class="ellipsis"><a href="/{{$sibling.StreamID}}" class="turboclick">{{.Label}}</a></div>
		{{- end -}}
	{{- end -}}

</div>