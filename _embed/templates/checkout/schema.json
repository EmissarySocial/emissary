{
	"templateId": "checkout",
	"label": "Checkout",
	"description": "Add a 'buy now' option to this stream.",
	"icon": "shopping-cart",
	"asFeature": true,
	"schema": {
		"type": "object",
		"properties": {
			"label": {"type": "string", "default": "Buy Now"},
			"data": {"type": "any", "comment":"This is 'any' because the data is validated/controlled by the schema in the stripe-product action."}
		}
	},
	"states": {
		"new": {},
		"ready": {},
		"sold-out": {}
	},
	"roles": {
		"owner": {
			"label": "Domain Owner",
			"decription": "Full control"
			}, 
		"readonly": {
			"label": "Read Only Access",
			"description": "Can read this article, but cannot make changes"
		}, 
		"anonymous": {
			"label": "Anonymous / Unauthenticated User",
			"description": "This is useful because Stripe confirmations come back without cookies."
		}
	},
	"actions": {
		"feature": {"step": "view-html", "roles":["anonymous"]},
		"checkout": {
			"roles": ["anonymous"],
			"states": ["ready"],
			"step": "stripe-checkout"
		},
		"success": {
			"roles":["anonymous"],
			"states": ["ready", "sold-out"],
			"steps": [
				{"step": "stripe-complete"},
				{"step":"view-html"}
			]},
		"edit": {
			"roles": ["owner"],
			"steps": [
				{"step": "as-modal", "steps": [
					{"step": "stripe-product"},
					{"step": "save", "message": "Stripe Checkout settings updated by {{.Author}}"}
				]}
			]
		}
	}
}
