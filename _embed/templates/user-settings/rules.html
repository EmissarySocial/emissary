<div class="app" script="on load take .selected from .nav-item for #nav-settings">
	<title>{{.RuleCount}} Rules | {{.DisplayName}}</title>
	<link rel="stylesheet" href="/.templates/user-settings/stylesheet">

	<div id="app-sidebar" class="expanded">

		<a href="/@me/settings/following" hx-boost="true" class="turboclick menu-item ellipsis" style="view-transition-name: nav-following;">{{icon "star"}} Following</a>
		<a href="/@me/settings/followers" hx-boost="true" class="turboclick menu-item ellipsis" style="view-transition-name: nav-followers;">{{icon "person"}} Followers</a>
		<a href="/@me/settings/circles" hx-boost="true" class="turboclick menu-item ellipsis" style="view-transition-name: nav-circles;">{{icon "circle"}} Circles</a>
		<a href="/@me/settings/payments" hx-boost="true" class="turboclick menu-item ellipsis" style="view-transition-name: nav-payments;">{{icon "credit-card"}} Payments</a>
		<a href="/@me/settings/rules" hx-boost="true" class="turboclick menu-item ellipsis selected" style="view-transition-name: nav-rules;">{{icon "rule-fill"}} Rules</a>
		<a href="/@guest" class="turboclick menu-item ellipsis" style="view-transition-name: nav-guest;">{{icon "user"}} Guest Profile</a>
		<hr>
		<a hx-post="/signout" class="button">Sign Out</a>
	
	</div>
	
	<div class="app-content padding">

		<div class="flex-row flex-align-center margin-bottom-lg">
			<h1 class="text-xl bold margin-none flex-grow">Rules</h1>
			<a href="https://emissary.dev/rules" target="_blank">{{icon "help"}} Help with Rules</a>
		</div>

		<div>
			<input
				type="text" 
				name="search" 
				placeholder="Search Rules"
				hx-get="/@me/settings/rules-list"
				hx-trigger="keyup queue:last delay:100ms"
				hx-target="#rules-list"
				hx-swap="innerHTML"
				hx-push-url="false">
		</div>

		<div class="table margin-top" style="border-bottom:none;">
			<div hx-get="/@me/settings/rule-add" role="button" class="link">
				{{icon "add"}} Add an Inbox Rule
			</div>
		</div>

		<div id="rules-list" class="table">
			{{.View "rules-list"}}
		</div>
	
	</div>

	<div 
		hx-get="{{.URL}}" 
		hx-trigger="refreshPage from:window" 
		hx-target="main"
		hx-swap="innerHTML"
		hx-push-url="false">
	</div>

</div>