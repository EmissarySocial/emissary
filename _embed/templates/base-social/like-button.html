{{- $url := .QueryParam "url" -}}
{{- $responses := .GetResponseSummary $url -}}
{{- $document := .ActivityStream $url -}}
{{- $stats := $document.Statistics -}}

<span hx-target="this" hx-swap="outerHTML" hx-push-url="false">

	{{- if $responses.Announce -}}
		<button 
			class="turboclick selected" 
			hx-post="{{.BasePath}}/like-button?url={{$url}}" 
			hx-vals='{"type":"Announce", "url":"{{$url}}", "exists":false}'
		><span aria-hidden="true" class="margin-left-xs">{{icon "announce-fill"}}</span> Shared</button>
	{{- else -}}
		<button 
			class="turboclick" 
			hx-post="{{.BasePath}}/like-button?url={{$url}}" 
			hx-vals='{"type":"Announce", "url": "{{$url}}", "exists":true}'
			><span aria-hidden="true" class="margin-left-xs">{{icon "announce"}}</span> Share</button>
	{{- end -}}

	{{- if $responses.Like -}}
		<button class="turboclick selected" hx-post="{{.BasePath}}/like-button?url={{$url}}" hx-vals='{"type":"Like", "url":"{{$url}}", "exists":false}'><span aria-hidden="true" class="margin-left-xs">{{icon "like-fill"}}</span> Liked</button>
	{{- else -}}
		<button class="turboclick" hx-post="{{.BasePath}}/like-button?url={{$url}}" hx-vals='{"type":"Like", "url": "{{$url}}", "exists":true}'><span aria-hidden="true" class="margin-left-xs">{{icon "like"}}</span> Like</button>
	{{- end -}}

	<a href="{{$url}}" target="_blank" class="button">
		{{icon "globe"}} Website
	</a>

	{{- if eq $stats.Replies 0 -}}
		<span class="text-gray ma rgin-left">0 Replies</span>
	{{- else -}}
		<span
			role="button"
			hx-get="/@me/inbox/browse?&url={{$url}}"
			hx-push-url="false"
			tabIndex="0"
			class="text-gray margin-left">{{$stats.Replies}} {{pluralize $stats.Replies "Reply" "Replies"}}</span>
	{{ end }}

	{{ if gt $stats.Announces 0 }}
		<span class="text-gray margin-left">{{$stats.Announces}} {{pluralize $stats.Announces "Share" "Shares"}}</span>
	{{ end }}

	{{ if gt $stats.Likes 0 }}
		<span class="text-gray margin-left">{{$stats.Likes}} {{pluralize $stats.Likes "Like" "Likes"}}</span>
	{{ end }}


</span>
