{{- $builder := index . 0 -}}
{{- $actor := index . 1 -}}

{{- $following := $builder.AmFollowing $actor.ID -}}
{{- $follower := $builder.IsFollower $actor.ID -}}
{{- $search := $builder.QueryParam "search" -}}
{{- $folderID := $builder.QueryParam "folderId" -}}

<div id="modal-header" class="flex-row">
	<div role="tablist" class="pills margin-bottom-none">

		{{- if ne "" $search -}}
			<span role="link" class="link margin-right" hx-get="/@me/settings/following-search?search={{$search}}&folderId={{$folderID}}">
				&larr; Search
			</span>
		{{- end -}}

		<button role="tab" hx-get="/@me/inbox/browse?url={{$actor.ID}}&search={{$search}}&folderId={{$folderID}}">{{icon "person"}} Profile</button>
		<button role="tab" aria-selected="true" hx-get="/@me/inbox/notes?followingId={{$following.ID}}&search={{$search}}&folderId={{$folderID}}">{{icon "note"}} Notes</button>

		{{ if $following.IsNew -}}
			<button role="tab" hx-get="/@me/settings/following-edit?url={{$actor.ID}}&search={{$search}}&folderId={{$folderID}}">{{icon "add"}} Follow</button>
		{{- else -}}
			<button role="tab" hx-get="/@me/settings/following-edit?url={{$actor.ID}}&search={{$search}}&folderId={{$folderID}}">{{icon "check"}} Following</button>
		{{- end }}

		{{ if $follower.IsNew -}}
			<span class="text-light-gray margin-left" disabled>Doesn't Follow You</span>
		{{- else -}}
			<button role="tab" hx-get="/@me/settings/follower?followerId={{$follower.FollowerID.Hex}}&search={{$search}}&folderId={{$folderID}}">{{icon "check"}} Follows You</button>
		{{- end }}
	</div>
</div>

<div id="modal-body" class="pos-relative">

	<div class="flex-grow flex-row flex-align-center margin-bottom text-plain">
		{{- if $actor.Icon.NotNil -}}
			<img src="{{$actor.Icon.Href}}" class="circle width-64">
		{{- end -}}
		<div>
			<div class="text-plain text-lg bold margin-vertical-none">{{$actor.Name}}</div>
			<div class="text-light-gray margin-vertical-none">{{$actor.UsernameOrID}}</div>
		</div>
	</div>
