{
	"templateId": "test",
	"label": "TEST: Table Widget",
	"description": "This content type is just a test of the table widget.  Please remove.",
	"icon": "bug",
	"containedBy": ["top", "folder", "article"],
	"schema": {
		"type": "object",
		"properties": {
			"document": {"type":"object", "properties":{
				"label": {"type": "string"},
				"summary": {"type": "string"}
			}},
			"stateId": {"type": "string", "enum": ["unpublished", "published"]},
			"data": {"type": "object", "properties":{
				"table": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"type":     {"type": "string", "default":"FILE", "enum":["FILE", "HTTP", "GIT", "S3"]},
							"location": {"type": "string"},
							"username": {"type": "string"},
							"password": {"type": "string"},
							"active":   {"type": "boolean"}
						}
					}
				}
			}}
		}
	},
	"states": {},
	"roles": {
		"owner": {
			"label": "Domain Owner",
			"decription": "Full control over this stream."
			}, 
		"editor": {
			"label": "Editor",
			"description": "Can make changes to this article."
		},
		"viewer": {
			"label": "Viewer",
			"description": "Can read and comment on this article."
		}
	},
	"actions": {
		"init": {
			"steps": [
				{"step": "set-data", "values": {"document.label": "New Table Test Case"}},
				{"step": "set-state", "state": "unpublished"}
			]
		},
		"view": {
			"step": "view-html"
		},
		"table": {
			"steps": [{
				"step":"edit-table",
				"path": "data.table",
				"form": {
					"type": "layout-table",
					"children": [
						{"path": "type",     "type": "select", "label": "Type"},
						{"path": "location", "type": "text",   "label": "Location"},
						{"path": "active",   "type": "toggle", "label": "Active?", "options":{"true-text": "Yes", "false-text": "No"}}
					]
				}
			},
			{"step": "save", "comment": "Data table updated by {{.Author}}"}
		]},
		"properties": {
			"roles": ["editor", "owner"],
			"steps": [
				{"step": "as-modal", "steps": [
					{"step": "form-html",
						"form": {
							"type": "layout-vertical",
							"label": "Article Properties",
							"description": "This will update the object in this state",
							"children": [
								{"type": "text", "path": "document.label", "label": "Label"},
								{"type": "textarea", "path": "document.summary", "label": "Summary"}
							]
						}
					}]
				},
				{"step": "save", "comment": "Properties updated by {{.Author}}"}
			]
		},
		"delete": {
			"roles": ["owner"],
			"steps": [
				{"step": "delete", "title": "Delete this Article?", "message": "All content and comments will be lost.  There is NO UNDO."},
				{"step": "unpublish"},
				{"step": "forward-to", "url":"/{{.ParentID}}"}
			]
		}
	}
}
