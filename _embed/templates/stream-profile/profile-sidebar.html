<div class="app-sidebar">
	
	<link rel="stylesheet" href="/.templates/user-profile/stylesheet">
	<link rel="canonical" class="u-url" href="{{.ProfileURL}}"></link>

	<div class="space-below" style="position:relative;">
		{{- if .UserCan "profile-photo" -}}
			<script src="/static/nebula/uploader._hs" type="text/hyperscript"></script>
			<link rel="stylesheet" href="/static/nebula/uploader.css"/>
			<button type="button" hx-get="/@me/profile-photo" class="text-xs vertical-space-none pos-absolute" style="top:0px; right:0px;">Edit</button>
		{{- end -}}
	
		<div class="circle placeholder-gray" style="width:90%; max-width:200px;">
			{{- if ne "" .ActivityPubAvatarURL -}}
				<img class="circle aspect-square u-photo" src="{{.ActivityPubAvatarURL}}" style="height:100%; width:100%;" onerror="this.style.display='none'">
			{{- end -}}
		</div>
	</div>

	<div class="space-below">
		<button hx-get="/@me/profile-edit" class="text-xs float-right">Edit</button>
		
		<h1 class="p-name" style="margin:0px;">{{.DisplayName}}</h1>
		<h2 class="gray50" style="margin:0px;">{{.Username}}</h2>
		{{- if not .Myself -}}
			<div class="space-above">
				<button type="button" class="primary width-100" hx-get="/@{{.UserID}}/follow">{{icon "add-circle"}} Follow {{.DisplayName}}</button>
			</div>
		{{- end -}}
		<div class="space-above" hx-push-url="true">
			<span hx-get="/@{{.Username}}/followers" role="link"><b>{{.FollowerCount}}</b> Followers</span>
			&nbsp;
			<span hx-get="/@{{.Username}}/following" role="link"><b>{{.FollowingCount}}</b> Following</span>
		</div>
		<div class="space-above">
			<span class="p-note">{{.StatusMessage}}</span>
		</div>
		{{- if ne "" .Location -}}
			<div class="space-above p-adr"><span class="p-label">{{icon "location"}} {{.Location}}</a></div>
		{{- end -}}

	</div>

	<div class="space-above align-left">

		{{- $links := .Links -}}

		{{- if eq 0 (len $links) -}}

			{{- if .UserCan "profile-edit" -}}
				<hr>
			<button type="button" hx-get="/@me/profile-links">Add Links</button>
			{{- end -}}

		{{- else -}}

			{{- if .UserCan "profile-edit"  -}}
				<hr>
				<div class="float-right">
					{{- if .UserCan "profile-links" -}}
						<button type="button" hx-get="/@me/profile-links" class="text-xs vertical-space-none">Edit</button>
					{{- end -}}
				</div>
			{{- end -}}

			{{- range $links -}}
				<div><a rel="me" class="text-plain u-url" href="{{.ProfileURL}}" target="_blank">{{icon "globe"}} {{.Name}}</a></div>
			{{- end -}}
		{{- end -}}

	</div>

	{{- if .UserCan "profile-edit" -}}
		<hr>
		<div>
			<button hx-post="/signout" hx-target="body">Sign Out</button>
		</div>
	{{- end -}}

</div>
