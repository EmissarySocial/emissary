<script type="text/hyperscript">

init
	set nodes to <h1, h2, h3, h4 />

	log nodes

	for node in  <h1, h2, h3, h4 /> 
		set anchor to `<div class="scrollspy-item ${scrollspy_indent(node)}"><a href="#${node.id}">${node.textContent}</a></div>`
		put anchor at the end of #scrollspy
	end

end
	
def scrollspy_indent(node)

	if node.tagName is "H1"
		return "level-1"
	end

	if node.tagName is "H2"
		return "level-2"
	end

	if node.tagName is "H3"
		return "level-3"
	end

	return "level-4"
end
</script>

<style>
	#scrollspy .scrollspy-item {
		display:block;
		white-space: nowrap;
		overflow:hidden;
		text-overflow:ellipsis;
		line-height:180%;
	}

	#scrollspy .scrollspy-item a {
		color:var(--gray80);
	}

	#scrollspy .level-1 {
		font-size: 18px;
		padding-left:0px;
		font-weight:bold;
	}

	#scrollspy .level-2 {
		font-size: 15px;
		padding-left:8px;
	}

	#scrollspy .level-3 {
		font-size: 12px;
		padding-left:16px;
	}

	#scrollspy .level-4 {
		font-size: 10px;
		padding-left:24px;
	}

</style>

<div id="scrollspy"></div>