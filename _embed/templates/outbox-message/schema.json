{
	"templateId":"outbox-message",
	"role":"outbox-item",
	"icon":"message",
	"label":"Post",
	"description":"Single comment in the comments section of a page.",
	"sort": 0,
	"containedBy": ["outbox"],
	"schema": {
		"type":"object",
		"properties": {
			"document":{"type":"object", "properties":{
				"summary": {"type":"string", "format":"html"},
				"imageUrl": {"type":"string", "format":"url"}
			}}
		}
	},
	"states": {
		"visible": {
			"label":"Visible",
			"description":"Comment is publicly visible"
		}
	},
	"roles": {
		"self": {
			"label":"Myself",
			"decription":"Outbox messages can only be sent by the current user."
		}
	},
	"actions": {
		"view": {
			"steps":[
				{"step":"view-html"}
			]
		},
		"create":{
			"roles": ["self"],
			"steps": [
				{"step":"view-html"},
				{"step":"set-data", "paths":["document.summary"]},
				{"step":"save"},
				{"step":"upload-attachments"},
				{"step":"set-thumbnail", "path":"document.imageUrl"},
				{"step":"publish"},
				{"step":"trigger-event", "event":{"refreshPage":true}}
			]
		},
		"delete": {
			"roles":["self"],
			"steps": [
				{"step":"delete"},
				{"step":"publish"},
				{"step":"forward-to", "url":"/@{{.ParentID}}"}
			]
		}
	}
}