<div hx-get="{{.URL}}" hx-trigger="refreshPage from:body">
	<title>{{.DisplayName}}</title>

	<div class="page h-card">
		<div class="pure-g">
			<div class="pure-u-1 pure-u-md-1-3 pure-u-lg-1-3 pure-u-xl-1-4">
				<link rel="canonical" class="u-url" href="{{.ActivityPubProfileURL}}"></link>

				{{- if .UserCan "edit-photo" -}}
					<link rel="stylesheet" href="/static/nebula/uploader.css"/>
					<script src="/static/nebula/uploader._hs" type="text/hyperscript"></script>

					<div class="circle-300 placeholder-gray space-below hover-trigger" style="position:relative" role="button" hx-get="/@me/edit-photo">
						{{- if ne "" .ActivityPubAvatarURL -}}
							<img class="u-photo circle-300" src="{{.ActivityPubAvatarURL}}">
						{{- end -}}
						<div class="text-sm align-center hover-reveal" style="position:absolute; bottom:0px; margin:0px; width:100%; color:white; background-color:rgba(0,0,0,0.5); padding:5px;">Edit Profile Photo</div>
					</div>
				{{- else -}}
					<div class="circle-300 placeholder-gray space-below">
						{{- if ne "" .ActivityPubAvatarURL -}}
							<img class="u-photo circle-300" src="{{.ActivityPubAvatarURL}}"></div>
						{{- end -}}
				{{- end -}}

				<div class="space-below">
					<h1 class="p-name" style="margin-bottom:0px;">{{.DisplayName}}</h1>
					<div class="gray50">{{.Username}}</div>
					{{- if ne "" .Description -}}
						<div class="space-above">{{.Description}}</div>
					{{- end -}}
					<div class="text-xs"><a hx-get="/@me/edit-profile" role="button">Edit</a></div>
				</div>

				{{- $links := .Links -}}
					<div class="space-below align-left">
						{{- if gt (len $links) 0 -}}
						<div class="bold">Links</div>
						{{- range $links -}}
							<div><a rel="me" class="u-url" href="{{.ProfileURL}}">{{icon "globe"}} {{.Organization}}</a></div>
						{{- end -}}
					{{- end -}}

					{{- if .UserCan "edit-links" -}}
						<button hx-get="/@me/edit-links" class="text-sm">Edit Links</button>
					{{- end -}}
				</div>

				{{- if .UserCan "edit" -}}
				<div class="space-above">
					<button hx-post="/signout" hx-target="body">Sign Out</button>
				</div>
				{{- end -}}
			</div>

			<div class="pure-u-1 pure-u-md-2-3 pure-u-lg-2-3 pure-u-xl-3-4" style="border-left: solid 1px var(--gray20); padding-left:20px;">
				<h3>Activity Feed</h3>
				{{ .View "outbox-list"}}
			</div>
		</div>
	</div>
</div>