<div class="pure-u-1 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-5">
	<link rel="canonical" class="u-url" href="{{.ActivityPubProfileURL}}"></link>

	<div hx-get="/@{{.Username}}" hx-push-url="true" role="link" class="hover-trigger" style="position:relative;">
		{{- if .UserCan "edit-photo" -}}
			<script src="/static/nebula/uploader._hs" type="text/hyperscript"></script>
			<link rel="stylesheet" href="/static/nebula/uploader.css"/>
			<button hx-get="/@me/edit-photo" role="button" class="text-xs vertical-space-none" style="position:absolute; top:0px; right:0px;">Edit</button>
		{{- end -}}
	
		{{- if ne "" .ActivityPubAvatarURL -}}
			<img class="u-photo" src="{{.ActivityPubAvatarURL}}" style="aspect-ratio:1; width:90%; border-radius:300px;">
		{{- else -}}
			<div class="placeholder-gray space-below" style="position:relative; aspect-ratio:1; width:90%; border-radius:300px;"></div>
		{{- end -}}
	</div>

	<div class="space-below">
		<button hx-get="/@me/edit-profile" class="text-xs float-right">Edit</button>
		
		<h1 class="p-name" style="margin:0px;">{{.DisplayName}}</h1>
		<h2 class="gray50" style="margin:0px;">{{.Username}}</h2>
		<div class="space-above" hx-push-url="true">
			<span hx-get="/@{{.Username}}/followers" role="link"><b>{{.FollowerCount}}</b> Followers</span>
			&nbsp;
			<span hx-get="/@{{.Username}}/following" role="link"><b>{{.FollowingCount}}</b> Following</span>
		</div>
		<div class="space-above">
			<span class="p-note">{{.StatusMessage}}</span>
		</div>
	</div>

	<hr>

	<div class="space-above align-left">

		{{- $links := .Links -}}

		{{- if or (gt 0 (len $links)) (.UserCan "edit-profile")  -}}
			<div class="float-right">
				{{- if .UserCan "edit-links" -}}
					<button hx-get="/@me/edit-links" role="button" class="text-xs vertical-space-none">Edit</button>
				{{- end -}}
			</div>
		{{- end -}}

		{{- if ne "" .Location -}}
			<div class="p-adr"><span class="p-label">{{icon "location"}} {{.Location}}</a></div>
		{{- end -}}

		{{- range $links -}}
			<div><a rel="me" class="text-plain u-url" href="{{.ProfileURL}}" target="_blank">{{icon "globe"}} {{.Name}}</a></div>
		{{- end -}}

	</div>

	{{- if .UserCan "edit-profile" -}}
		<hr>
		<div>
			<button hx-post="/signout" hx-target="body">Sign Out</button>
		</div>
	{{- end -}}

</div>
