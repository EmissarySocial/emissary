{{- $folders := .Folders -}}
{{- $folderID := .QueryParam "folderId" -}}
{{- if eq "" $folderID -}}
	{{- $folderID = (index $folders 0).FolderID.Hex -}}
{{- end -}}

<link rel="stylesheet" href="/.templates/user-profile/stylesheet">

<div id="inbox-sidebar" class="app-sidebar" hx-target="#main" hx-swap="innerHTML" hx-push-url="true">

	<div class="pos-sticky" style="top:100px;">

		{{- range .Folders -}}

			{{- if (eq .FolderID.Hex $folderID) -}}
				<div role="link" hx-get="/@me/inbox?folderId={{.FolderID.Hex}}" class="bold ellipsis">{{icon "folder"}} {{.Label}}</div>
			{{- else -}}
				<div role="link" hx-get="/@me/inbox?folderId={{.FolderID.Hex}}" class="ellipsis">{{icon "folder"}} {{.Label}}</div>
			{{- end -}}

		{{- end -}}
		<div role="button" hx-get="/@me/inbox-add">{{icon "add"}} Add a Folder</div>
		<hr>
		<div role="button" hx-get="/@me/following-add">{{icon "add"}} Add a Follow</div>
		<div role="button" hx-get="/@me/following">{{icon "settings"}} Manage Follows</div>
	</div>

	<div 
		hx-get="/@me/inbox-sidebar" 
		hx-swap="outerHTML" 
		hx-trigger="refreshSidebar from:body" 
		hx-push-url="false" 
		hx-target="#inbox-sidebar">
	</div>

</div>
