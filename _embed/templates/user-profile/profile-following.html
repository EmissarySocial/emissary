{{- $following := .Following -}}

<div hx-get="{{.URL}}" hx-trigger="refreshPage from:body" hx-target="this" hx-swap="outerHTML">
	<title>{{.FollowingCount}} Following | {{.DisplayName}}</title>

	<div class="page h-card">

		<div class="pure-g">

			{{ .View "profile-sidebar" }}

			<div class="pure-u-1 pure-u-md-2-3 pure-u-lg-3-4">

				{{- if .UserCan "edit-profile" -}}
				<div class="float-right">
					<button hx-get="/@me/pub/following/new">{{icon "add"}} Follow</button>
				</div>
				{{- end -}}

				<div class="space-below" hx-push-url="true">
					<span hx-get="/@{{.UserID}}" class="clickable">{{icon "book"}} Posts</span> &nbsp;
					<span hx-get="/@{{.UserID}}/followers" class="clickable">{{icon "person"}} Followers</a> &nbsp;
					<b>{{icon "star"}} Following</b>
				</div>

				<br>

				<table class="table">
					{{ range $following }}
						<tr role="button">
							<td hx-get="/@me/pub/following/{{.FollowingID.Hex}}">
								{{icon "rss"}} 
							</td>
							<td hx-get="/@me/pub/following/{{.FollowingID.Hex}}">
								{{ if eq "" .Label }} 
									{{- .URL -}}
								{{ else }}
									{{- .Label -}}
								{{ end }}
							</td>
							<td hx-get="/@me/pub/following/{{.FollowingID.Hex}}">{{.Status}}</td>
							<td class="align-right">
								<button hx-get="/@me/pub/following/{{.FollowingID.Hex}}/delete" class="text-red">Delete</button>
							</td>
						</tr>
					{{ end }}
				</table>
						
			</div>
		</div>
	</div>
</div>