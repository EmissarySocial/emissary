{
	"templateId": "user-profile",
	"role": "user-profile",
	"label": "Inbox",
	"description": "Profile displays everything about a user, including their inbox and outbox information",
	"icon": "inbox",
	"containedBy": [],
	"schema": {
		"title": "User Profiler",
		"type": "object",
		"properties": {
			"feeds": {
				"description": "Array of people to render on the page",
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"url": {
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					}
				}
			}
		}
	},
	"states": {
		"default": {
			"label": "Inbox only has default state"
		}
	},
	"roles": {
		"owner": {
			"label": "Inbox Owner",
			"decription": "Full control"
		}
	},
	"actions": {
		"view": {
			"step": "view-html"
		},
		"inbox": {
			"roles": ["myself"],
			"steps": [
				{"step": "set-query-param", "selected":"inbox", "readDate": "0"},
				{"step": "view-html", "file": "inbox"}
			]
		},
		"inbox-all": {
			"roles": ["myself"],
			"steps": [
				{"step": "set-query-param", "selected":"inbox-all"},
				{"step": "view-html", "file": "inbox"}
			]
		},
		"inbox-folder": {
			"roles": ["myself"],
			"steps": [
				{"step": "set-query-param", "selected":"inbox-folder"},
				{"step": "view-html", "file": "inbox"}
			]
		},
		"inbox-sidebar": {
			"roles": ["myself"],
			"step": "view-html"
		},
		"inbox-list": {
			"roles": ["myself"],
			"step": "view-html"
		},
		"inbox-item": {
			"roles": ["myself"],
			"steps": [{"step": "as-modal", "class":"huge", "steps": [
				{"step":"view-html"}
			]}]
		},
		"inbox-folder-edit": {
			"roles":["myself"],
			"steps": [
				{"step": "with-folder", "steps": [
					{"step": "as-modal", "steps": [
						{"step": "form-html", "form": {
							"type": "layout-vertical",
							"label": "Folder Info",
							"children": [
								{"type": "text", "path": "label", "label": "Name"}
							]}
						},
						{"step": "save"}
					]},
					{"step": "trigger-event", "event":{"closeModal":true, "refresh-sidebar":true}}
				]}
			]
		},
		"inbox-folder-delete": {
			"roles":["myself"],
			"steps": [
				{"step": "with-folder", "steps": [
					{"step": "delete"}
				]}
			]
		},
		"outbox-list": {
			"roles": ["myself"],
			"step": "view-html"
		},
		"subscriptions": {
			"roles": ["myself"],
			"steps": [
				{"step": "set-query-param", "selected":"subscriptions"},
				{"step": "view-html", "file": "subscriptions"}
			]
		},
		"edit-profile": {
			"roles": ["myself"],
			"steps": [
				{"step": "as-modal", "steps":[
					{"step": "form-html", "form": {
						"type": "layout-vertical",
						"label": "Edit Profile Info",
						"children": [
							{"type": "text", "path": "displayName", "label": "Name"},
							{"type": "text", "path": "location", "label": "Location"},
							{"type": "textarea", "path": "description", "label": "Message"}
						]
					}},
					{"step": "save", "comment": "Profile updated by {{.Author}}"}
				]}
			]
		},
		"edit-photo": {
			"roles": ["myself"],
			"steps":[
				{"step": "as-modal", "steps":[
					{"step": "view-html"},
					{"step": "delete-attachments", "all":true},
					{"step": "upload-attachments", "maximum":1},
					{"step": "set-thumbnail", "path":"imageUrl"},
					{"step": "save", "comment": "Profile photo updated by {{.Author}}"}
				]}
			]
		},
		"edit-links": {
			"roles": ["myself"],
			"steps": [
				{"step": "as-modal", "steps":[
					{"step": "view-html"}
				]}
			]
		},
		"edit-links-table": {
			"roles": ["myself"],
			"steps": [
				{"step": "edit-table", "path": "links", "form": {
					"type": "layout-table",
					"children": [
						{"type": "text", "path": "organization", "label": "Label"},
						{"type": "text", "path": "profileUrl", "label": "URL"}
					]
				}},
				{"step": "save", "comment": "Links updated by {{.Author}}"}
			]
		},
		"preview-photo": {
			"roles": ["myself"],
			"step":"view-html"
		},
		"delete-photo": {
			"roles":["myself"],
			"steps":[
				{"step": "delete-attachments", "all":true},
				{"step": "set-thumbnail", "path":"imageUrl"},
				{"step": "save", "comment": "Profile photo deleted by {{.Author}}"},
				{"step": "trigger-event", "event":{"closeModal":true, "refreshPage":true}}
			]
		}
	}
}	
