{
	"templateId":"user-profile",
	"role":"user-profile",
	"label":"User Profile",
	"description":"Profile displays everything about a user, including their inbox and outbox information",
	"icon":"inbox",
	"containedBy": [],
	"schema": {
		"title":"User Profile",
		"type":"object",
		"properties": {
			"feeds": {
				"description":"Array of people to render on the page",
				"type":"array",
				"items": {
					"type":"object",
					"properties": {
						"url": {
							"type":"string"
						},
						"name": {
							"type":"string"
						}
					}
				}
			}
		}
	},
	"states": {
		"default": {
			"label":"Inbox only has default state"
		}
	},
	"roles": {
		"owner": {
			"label":"Inbox Owner",
			"decription":"Full control"
		}
	},
	"actions": {
		"view": {
			"steps":[
				{"step":"set-header", "name":"Link", "value":"<{{.Host}}/@{{.UserID}}>; rel=\"self\", <{{.Host}}/@{{.UserID}}/websub>; rel=\"hub\""},
				{"step":"view-html", "file":"profile"}
			]
		},
		"profile-sidebar": {"step":"view-html"},
		"followers": {"step":"view-html", "file":"profile-followers"},
		"followers-list": {"step":"view-html", "file":"profile-followers-list"},
		"following": {"step":"view-html", "file":"profile-following"},
		"blocks": {"step":"view-html", "file":"profile-blocks"},
		"feed": {"step":"view-feed"},
		"websub": {"step":"websub"},
		"outbox-list": {"step":"view-html"},
		"outbox-add": {
			"roles": ["self"],
			"steps": [
				{"step":"add-child-embed", "templates":["outbox-message"], "showLabels":false}
			]
		},
		"inbox": {
			"roles": ["self"],
			"steps": [
				{"step":"set-query-param", "selected":"inbox", "readDate":"0"},
				{"step":"view-html", "file":"inbox"}
			]
		},
		"inbox-sidebar": {
			"roles": ["self"],
			"step":"view-html"
		},
		"inbox-all": {
			"roles": ["self"],
			"steps": [
				{"step":"set-query-param", "selected":"inbox-all"},
				{"step":"view-html", "file":"inbox"}
			]
		},
		"inbox-folder": {
			"roles": ["self"],
			"steps": [
				{"step":"set-query-param", "selected":"inbox-folder", "readDate":"0"},
				{"step":"view-html", "file":"inbox"}
			]
		},
		"inbox-list": {
			"roles": ["self"],
			"step":"view-html"
		},
		"activity": {
			"roles": ["self"],
			"steps": [{"step":"as-modal", "class":"huge", "steps": [
				{"step":"view-html"}
			]}]
		},
		"inbox-folder-edit": {
			"roles":["self"],
			"steps": [
				{"step":"with-folder", "steps": [
					{"step":"as-modal", "steps": [
						{"step":"edit", "form": {
							"type":"layout-vertical",
							"label":"Manage Folder",
							"children": [
								{"type":"text", "path":"label", "label":"Name"}
							]}
						},
						{"step":"save"}
					]},
					{"step":"trigger-event", "event":{"closeModal":true, "refreshPage":true}}
				]}
			]
		},
		"inbox-folder-delete": {
			"roles":["self"],
			"steps": [
				{"step":"with-folder", "steps": [
					{"step":"delete"}
				]}
			]
		},
		"edit-profile": {
			"roles": ["self"],
			"steps": [
				{"step":"as-modal", "steps":[
					{"step":"edit", "form": {
						"type":"layout-vertical",
						"label":"Edit Profile Info",
						"children": [
							{"type":"text", "path":"displayName", "label":"Name"},
							{"type":"text", "path":"location", "label":"Location"},
							{"type":"textarea", "path":"statusMessage", "label":"Message"}
						]
					}},
					{"step":"save", "comment":"Profile updated by {{.Author}}"}
				]}
			]
		},
		"edit-photo": {
			"roles": ["self"],
			"steps":[
				{"step":"as-modal", "steps":[
					{"step":"view-html"},
					{"step":"delete-attachments", "all":true},
					{"step":"upload-attachments", "maximum":1},
					{"step":"set-thumbnail", "path":"imageId"},
					{"step":"save", "comment":"Profile photo updated by {{.Author}}"}
				]},
				{"step":"reload-page"}
			]
		},
		"edit-links": {
			"roles": ["self"],
			"steps": [
				{"step":"as-modal", "steps":[
					{"step":"view-html"}
				]}
			]
		},
		"edit-links-table": {
			"roles": ["self"],
			"steps": [
				{"step":"edit-table", "path":"links", "form": {
					"type":"layout-table",
					"children": [
						{"type":"text", "path":"name", "label":"Label"},
						{"type":"text", "path":"profileUrl", "label":"URL"}
					]
				}},
				{"step":"save", "comment":"Links updated by {{.Author}}"}
			]
		},
		"preview-photo": {
			"roles": ["self"],
			"step":"view-html"
		},
		"delete-photo": {
			"roles":["self"],
			"steps":[
				{"step":"delete-attachments", "all":true},
				{"step":"set-thumbnail", "path":"imageId"},
				{"step":"save", "comment":"Profile photo deleted by {{.Author}}"},
				{"step":"reload-page"}
			]
		}
	}
}	
