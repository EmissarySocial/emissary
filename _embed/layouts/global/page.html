<!DOCTYPE html>
<html>
<head>
	<title>{{.DomainLabel}} | {{.PageTitle}}</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="generator" content="Emissary_0.1.0">

	<link rel="webmention" href="/.well-known/webmentions"/>

	<link rel="stylesheet" href="/static/purecss/pure-min.css">
	<link rel="stylesheet" href="/static/purecss/pure-grids-responsive-min.css">
	<link rel="stylesheet" href="/static/colors.css">

	<link rel="stylesheet" href="/static/layout.css">
	<link rel="stylesheet" href="/static/page.css">

	<link rel="stylesheet" href="/static/accessibility.css">
	<link rel="stylesheet" href="/static/animations.css">
	<link rel="stylesheet" href="/static/content.css">
	<link rel="stylesheet" href="/static/forms.css">	
	<link rel="stylesheet" href="/static/modal.css">
	<link rel="stylesheet" href="/static/tabs.css">	
	<link rel="stylesheet" href="/static/tables.css">	
	<link rel="stylesheet" href="/static/typography.css">	
	<link rel="stylesheet" href="/static/widgets.css">

	<link rel="stylesheet" href="/static/nebula/nebula.css">	
	<link rel="stylesheet" href="/static/responsive.css">	

	<!-- This must be in the header to support streams that invoke htmx directly. -->
	<script type="text/javascript" src="/static/htmx/htmx.min.js"></script>

	<style>{{.DomainCustomCSS | css}}</style>

</head>

<body hx-target="#main" hx-swap="innerHTML" hx-push-url="false" hx-ext="a11y">

	{{- $topID := .TopLevelID -}}

	<header>{{.DomainHeaderHTML | html}}</header>

	<nav hx-push-url="true">
		<div class="framed">
			<div class="left">
				{{- range .TopLevel -}}
					<a href="/{{.Token}}" class="{{- if eq $topID .StreamID -}}selected{{- end -}}">{{.Label}}</a>
				{{- end -}}
			</div>
			<div class="right">
				{{- if .IsAuthenticated -}}
				<a href="/profile/inbox" class="{{- if eq $topID `inbox` -}}selected{{- end -}}">Inbox</a>
				<a href="/profile" class="{{- if eq $topID `profile` -}}selected{{- end -}}">Profile</a>
					{{- if .IsOwner -}}<a href="/admin/domain"  class="{{- if eq $topID `admin` -}}selected{{- end -}}">Settings</a>{{- end -}}
					<!--button hx-post="/signout" hx-target="body">Sign Out</button-->
				{{- else -}}
					<a href="/signin">Sign In</a>
				{{- end -}}
			</div>
		</div>

	</nav>

	<main>
		<div id="main" class="framed">
			{{- .Render -}}
		</div>
	</main>

	<footer>{{.DomainFooterHTML | html}}</footer>
	
	<aside></aside>

	<script type="text/hyperscript" src="/static/date._hs"></script>
	<script type="text/hyperscript" src="/static/forms._hs"></script>
	<script type="text/hyperscript" src="/static/modal._hs"></script>
	<script type="text/hyperscript" src="/static/tabs._hs"></script>
	<script type="text/hyperscript" src="/static/nebula/hotkey._hs"></script>
	<script type="text/hyperscript" src="/static/nebula/wysiwyg._hs"></script>

	<script type="text/javascript" src="/static/hyperscript/_hyperscript.min.js"></script>
	<script type="text/javascript" src="/static/a11y.js"></script>
	<script type="text/javascript" src="/static/extensions.js"></script>
		
	<!-- https://tabler-icons.io -->
	<link rel="stylesheet" href="/static/tabler/tabler-icons.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
</body>
</html>
