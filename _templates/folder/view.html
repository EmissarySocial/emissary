<div hx-sse="connect:/{{.StreamID}}/sse">
<div hx-get="/{{.Token}}" hx-trigger="sse:{{.StreamID}}, refreshPage from:body">
<div class="page">

	<h1>{{.Label}}</h1>

	{{- if ne "" .Description -}}
		<div class="space-below">{{.Description}}</div>
	{{- end -}}

	{{- if .UserCan "edit" -}}
		<div id="menu-bar">
			<div class="left">
				{{- if .UserCan "new" -}}
					<button hx-get="/{{.Token}}/new">Add Item</button>
				{{- end -}}

				<button hx-get="/{{.Token}}/edit">Edit Info</button>

				{{- if .UserCan "sharing" -}}
					<button hx-get="/{{.Token}}/sharing">Sharing</button>
				{{- end -}}
			</div>

			<div class="right">
				{{- if .UserCan "delete" -}}
					<button hx-get="/{{.Token}}/delete" class="text-red">Delete</button>
				{{- end -}}
			</div>
		</div>
	{{- end -}}

	{{- if eq (.Data "format") "TABLE" -}}
		<table class="table">
			<thead>
				<tr>
					<th>Name</th>
					<th>Description</th>
					<th>Date</th>
				</tr>
			</thead>
			<tbody hx-push-url="true">
				{{- range .Children.ByLabel.View -}}
					<tr hx-get="/{{.Token}}" role="link">
						<td><i class="fa-regular fa-file-lines"></i> {{.Label}}</td>
						<td>{{.Description}}</td>
						<td></td>
					</tr>
				{{- end -}}
			</tbody>
		</table>
	{{- end -}}

	{{- if eq (.Data "format") "CARDS" -}}

		{{- range .Children.ByLabel.View -}}
			<article class="clickable" hx-get="/{{.Token}}" hx-push-url="true">
				<h2 role="link">{{.Label}} [{{.ThumbnailImage}}]</h2>
				<p>{{.Description}}</p>
			</article>
		{{- end -}}

	{{- end -}}

	{{- if eq (.Data "format") "COLUMNS" -}}

		<div class="pure-g card-group" hx-push-url="true">
			{{- range .Children.ByLabel.View -}}
				<div class="pure-u-1 pure-u-sm-1-2 pure-u-lg-1-3 pure-u-xl-1-4" hx-get="/{{.Token}}">
					<article class="card" role="link">
						{{- if ne .ThumbnailImage "" -}}
						<picture loading="lazy" style="aspect-ratio:4/3;">
							<source type="image/webp" srcset="/{{.StreamID}}/attachments/{{.ThumbnailImage}}.webp?width=600&height=450"/>
							<img src="/{{.StreamID}}/attachments/{{.ThumbnailImage}}.jpg?width=600&height=450"/>
						</picture>
						{{- end -}}
						<div class="text text-lg align-center">{{.Label}}</div>
					</article>
				</div>
			{{- end -}}
		</div>
	{{- end -}}

</div>
</div>
</div>